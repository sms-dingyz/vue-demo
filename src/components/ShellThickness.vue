<template>
  <div class="echart-page">
	<div class="y-desc">ShellThickness[mm]</div>
	<div id="ShellThickness" style="width: 60%; height: 400px"/>   
  </div>
</template>

<script>
import * as echarts from 'echarts';
import { getShellThicknessData } from './ShellThickness';

export default {
  data() {
    return {
      message: '',
      messages: [],
      socket: null,
      echartData: getShellThicknessData()
    };
  },
  mounted() {
    this.socket = new WebSocket('ws://localhost:3000');
    this.socket.onmessage = (event) => {
      console.log('_____ event.data', event.data);
      this.messages.push(event.data);
    };

    var chartDom = document.getElementById('ShellThickness');
    var myChart = echarts.init(chartDom)
	
	const rawData = {
		fElementPositionArray:
		[0.0,0.0,0.10179655,0.2035931,0.30538967,0.4071862,0.5089828,0.61077935,0.7125759,0.8143724,0.916169,1.0179656,1.0779655,1.1464655,
		1.2149656,1.2854656,1.3559656,1.4264656,1.4969656,1.5676132,1.5679655,1.5683178,1.5870906,1.6057156,1.6243407,1.6429657,1.6615907,
		1.6802157,1.6988407,1.7175965,1.7179655,1.7183344,1.7370905,1.7557155,1.7743405,1.7929655,1.8115906,1.8302156,1.8488406,1.8675762,
		1.8679655,1.8683547,1.8877155,1.9069655,1.9262155,1.9454656,1.9647156,1.9839656,2.0032156,2.0225358,2.0229654,2.023395,2.0433404,
		2.0632155,2.0830905,2.1029656,2.1228406,2.1427157,2.1625907,2.1825154,2.1829655,2.1834157,2.2033405,2.2232156,2.2430906,2.2629657,
		2.2828407,2.3027158,2.3225908,2.342498,2.3429656,2.3434331,2.3633406,2.3832157,2.4030907,2.4229658,2.4428408,2.4627159,2.482591,2.5024774,
		2.5029657,2.503454,2.5239613,2.544457,2.5649526,2.5854483,2.605944,2.6264396,2.6469352,2.667435,2.6679654,2.668496,2.6896136,2.7107267,
		2.73184,2.752953,2.7740662,2.7951794,2.8162925,2.837409,2.8379655,2.838522,2.8611648,2.8838036,2.9064426,2.9254427,2.9444427,2.9670818,2.9897208,
		3.0123637,3.0129654,3.0135672,3.0370324,3.0604932,3.083954,3.1029541,3.1219542,3.145415,3.168876,3.192341,3.1929655,3.19359,3.2170482,3.2405024,
		3.2639565,3.2829566,3.3019567,3.3254108,3.348865,3.3723228,3.3729656,3.3736084,3.3970602,3.4205086,3.4439569,3.462957,3.481957,3.5054052,3.5288534,
		3.5523052,3.5529656,3.553626,3.577072,3.6005147,3.6239572,3.6429572,3.6619573,3.6853998,3.7088423,3.7322884,3.7329657,3.733643,3.7570834,3.7805204,
		3.8039575,3.8229575,3.8419576,3.8653946,3.8888316,3.9122722,3.9129658,3.9136593,3.9370944,3.960526,3.9839575,4.0029573,4.0219574,4.045389,4.068821,
		4.0922556,4.0929656,4.0936756,4.117105,4.1405315,4.1639576,4.1829576,4.2019577,4.2253838,4.24881,4.272239,4.2729654,4.2736917,4.2971153,4.3205366,
		4.3439574,4.3629575,4.3819575,4.4053783,4.428799,4.452224,4.4529653,4.4537067,4.477126,4.500542,4.523958,4.5429583,4.5619583,4.5853744,4.6087904,
		4.6322083,4.632965,4.633722,4.657134,4.680543,4.7039523,4.7229524,4.7419524,4.765362,4.788771,4.812183,4.812965,4.813747,4.838807,4.863864,
		4.888921,4.907921,4.926921,4.9519777,4.9770346,5.002095,5.0029655,5.0038357,5.0305433,5.057247,5.083951,5.102951,5.121951,5.148655,5.175359,5.202066,
		5.2029653,5.2038646,5.230457,5.257045,5.283633,5.3026333,5.3216333,5.348222,5.37481,5.402048,5.402965,5.403882,5.4297037,5.4564424,5.483181,5.502181,
		5.521181,5.5479198,5.5746584,5.6020193,5.602965,5.6039104,5.631364,5.659763,5.688162,5.726162,5.754561,5.78296,5.8119903,5.8129654,
		5.8139405,5.8413644,5.8697634,5.8981624,5.9361625,5.9645615,5.9929605,6.021972,6.0229654,6.0239587,6.0513644,6.0797634,6.1081624,6.1461625,6.1745615,
		6.2029605,6.231939,6.2329655,6.233992,6.2613645,6.2897635,6.3181624,
		6.3561625,6.3845615,6.4129605,6.4419346,6.4429655,6.4439964,6.4697104,6.496455,6.5232,6.5422,6.5612,6.587945,6.61469,6.641931,6.6429653,6.6439996,
		6.66971,6.696455,6.7232,6.7422,6.7612,6.787945,6.8146896,6.8419156,6.842965,
		6.8440146,6.86971,6.896455,6.9231997,6.9421997,6.9611998,6.9879446,7.0146894,7.0419,7.042965,7.0440297,7.06971,7.0964546,7.1231995,7.1421995,7.1611996,
		7.1879444,7.2146893,7.2418714,7.2429647,7.244058,7.27137,7.299775,
		7.3281803,7.3661804,7.3945856,7.422991,7.451843,7.4529653,7.4540877,7.4813704,7.5097756,7.538181,7.576181,7.604586,7.6329913,7.661827,7.6629653,
		7.6641035,7.6913705,7.7197757,7.748181,7.786181,7.814586,7.8429914,7.8718114,
		7.8729653,7.8741193,7.9013705,7.9297757,7.958181,7.996181,8.024587,8.052992,8.08113,8.082966,8.084802,8.185843,8.288721,8.391598,8.494475,8.597353,
		8.700231,8.803108,8.905985,8.907966,8.909946,9.009459,9.108971,9.208483,
		9.307996,9.407508,9.50702,9.606532,9.706044,9.707966,9.7098875,9.809585,9.909282,10.00898,10.108677,10.208374,10.308071,10.407768,10.507466,
		10.507966,10.508466,10.889841,11.271215,11.652591,12.033966,12.41534,12.796716,
		13.178091,13.559466,13.559966,13.560466,13.660341,13.760216,13.860091,13.959966,14.059841,14.159716,14.259591,14.359467,14.359966,14.360466,
		14.460341,14.560216,14.660091,14.759966,14.859841,14.959716,15.059591,15.159467,
		15.159966,15.160466,15.260342,15.360216,15.460092,15.559966,15.659842,15.759716,15.8595915,15.959466,15.959966,15.960465,16.14159,16.322716,
		16.503841,16.684965,16.86609,17.047215,17.22834,17.409466,17.409966,17.410465,17.47909,
		17.547716,17.61634,17.684965,17.75359,17.822216,17.89084,17.959465,17.959965,17.960464,18.029089,18.097715,18.16634,18.234964,18.303589,18.372215,
		18.44084,18.509464,18.509964,18.510464,18.78534,19.060213,19.335089,19.609964,
		19.884838,20.159714,20.43459,20.709467,20.709967,20.710466,20.87284,21.035217,21.197592,21.359966,21.52234,21.684717,21.847092,22.009466,
		22.009966,22.010466,22.077564,22.14466,22.21176,22.278858,22.345955,
		0.0,1E+30,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,
		0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,
		0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,
		0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,
		0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,
		0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,
		0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,
		0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,
		0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,
		0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,
		0.0],
		
		fShellUp_3DArray:[0.0,0.0,0.0,2.7139616,4.8291454,4.0927954,3.1990635,2.6001627,2.6962895,4.588815,5.2052784,
		5.4454727,5.6031694,5.676236,5.927889,6.4666166,7.84251,8.779436,8.94081,8.785701,8.785937,8.796929,8.80402,8.812673,8.819144,8.8298435,
		8.856027,8.880397,8.910636,8.828019,8.828971,8.875064,8.9451475,9.027751,9.121962,9.23291,9.361451,9.519904,9.706287,9.696947,9.701604,
		9.949684,10.212068,10.74196,11.100792,11.316608,11.449721,11.534872,11.5981865,11.464412,11.465082,11.493203,11.515054,11.527138,11.555413,
		11.582942,11.604372,11.645183,11.689871,11.579262,11.580596,11.645104,11.720973,11.809598,11.915067,12.03828,12.190923,12.36963,12.577037,
		12.575351,12.581011,12.835764,13.212536,13.53133,13.72223,13.851478,13.939769,14.003218,14.050668,13.870506,13.87115,13.898258,13.923917,
		13.945556,13.98335,14.024082,14.06475,14.119999,14.181097,14.066292,14.068159,14.151188,14.2520485,14.376981,14.529488,14.70911,14.91899,
		15.14437,15.378724,15.440196,15.4490595,15.731192,15.889985,15.989393,16.0452,16.096872,16.148026,16.188725,16.22306,16.22048,16.22163,
		16.266441,16.309937,16.353346,16.396784,16.442501,16.502785,16.565842,16.635975,16.634922,16.63691,16.717648,16.80847,16.920479,17.024775,
		17.142475,17.307201,17.494719,17.690203,17.694414,17.699728,17.900143,18.10332,18.308306,18.483667,18.602524,18.7058,18.779066,18.832968,18.830128,
		18.831306,18.871363,18.910751,18.945425,18.970331,18.991432,19.018127,19.050255,19.082207,19.078754,19.079668,19.108608,19.141703,19.179731,19.211693,
		19.244694,19.286713,19.328619,19.373028,19.370533,19.371891,19.420252,19.473667,19.532505,19.583838,19.644636,19.728594,19.822762,19.928741,
		19.930084,19.933514,20.052948,20.186882,20.326872,20.442244,20.55897,20.70416,20.850266,20.997227,21.000746,21.005266,21.153399,21.302803,21.42542,
		21.49683,21.553562,21.61067,21.657827,21.697317,21.693998,21.69515,21.729868,21.765097,21.798985,21.825356,21.850737,21.880018,21.910704,21.944288,
		21.940596,21.941675,21.975096,22.008732,22.04266,22.070578,22.096926,22.129597,22.163198,22.198423,22.195148,22.196354,22.236603,22.280333,22.32775,
		22.365599,22.407515,22.47151,22.542213,22.620604,22.620773,22.623663,22.71812,22.824774,22.941965,23.032589,23.124643,23.256315,23.390446,23.525974,
		23.529343,23.5339,23.671186,23.811563,23.953104,24.055305,24.159323,24.308764,24.410063,24.48472,24.48243,24.484509,24.539415,24.588213,24.631224,
		24.66016,24.689056,24.730272,24.770582,24.811182,24.807167,24.808548,24.848724,24.889109,24.927864,24.981499,25.024723,25.072426,25.126818,25.123755,
		25.125675,25.185314,25.26228,25.351774,25.50083,25.639044,25.810904,26.012083,26.017826,26.025145,26.239239,26.477644,26.733086,27.104609,27.375874,
		27.571136,27.76732,27.771336,27.778893,28.017637,28.40455,28.998533,30.323717,30.323717,30.323717,30.323717,30.311232,30.311232,30.311232,30.311232,
		30.311232,30.311232,30.311232,30.311232,30.311232,30.311232,30.302294,30.302294,30.302294,30.302294,30.302294,30.302294,30.302294,30.302294,30.302294,
		30.302296,30.293335,30.293335,30.293335,30.293335,30.293335,30.293352,30.293352,30.293352,30.293352,30.293352,30.284412,30.284412,30.284412,30.284412,
		30.284412,30.284412,30.284378,30.284378,30.284378,30.284378,30.27547,30.27547,30.27547,30.27547,30.27547,30.27547,30.27547,30.27547,30.27547,30.266085,
		30.266085,30.266085,30.266027,30.266027,30.266085,30.266085,30.266085,30.266085,30.256697,30.256697,30.256697,30.256697,30.256697,30.256697,30.256638,
		30.256638,30.256638,30.247309,30.247309,30.247309,30.247309,30.247309,30.247309,30.247309,30.247309,30.247309,30.23792,30.23792,30.23792,30.23792,
		30.23792,30.23792,30.237825,30.23792,30.23792,30.237825,30.23792,30.23792,30.23792,30.23792,30.237825,30.23792,30.23792,30.237825,30.23792,30.23792,
		30.237825,30.237825,30.237825,30.23792,30.23792,30.23792,30.23792,30.23792,30.23792,30.237825,30.23792,30.23792,30.23792,30.237825,30.23792,30.237825,
		30.237825,30.23792,30.237825,30.23792,30.237825,30.237825,30.237825,30.23792,30.23792,30.23792,30.237825,30.237825,30.237825,30.237825,30.23792,
		30.23792,30.23792,30.23792,30.237825,30.237825,30.237825,30.237825,30.23792,30.23792,30.237825,30.237825,30.237825,30.237825,30.237825,30.237825,
		30.23792,30.23792,30.23792,30.237825,30.237825,30.237825,30.237825,30.237825,30.23792,30.237825,30.237825,30.23792,30.23792,30.237825,30.237825,
		30.237825,30.237825,30.23792,30.23792,30.23792,30.23792,30.237825,30.237825,30.237825,30.237825,30.237825,30.237825,30.237825,30.237825,30.23792,
		30.23792,30.23792,30.237825,30.237825,30.237825,30.237825,30.237825,30.23792,30.237825,30.237825,30.23792,30.237825,30.23792,30.237825,30.23792,
		30.23792,30.23792,30.23792,30.237825,30.237825,30.23792,30.23792,30.237825,30.237825,30.23792,30.23792,30.23792,30.23792,30.23792,30.237825,30.237825,
		30.237825,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,
		0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,
		0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,
		0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,
		0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,
		0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,
		0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,
		0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,
		0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
	}

	rawData.fShellUp_3DArray  = rawData.fShellUp_3DArray.filter(
      (item) => item
    );
	rawData.fElementPositionArray  = rawData.fElementPositionArray.filter(
		(item) => item
	);
	
    const option = {
      // title: {
      //   left: 'center',
      //   text: 'Strand Temperature'
      // },
      grid: [
        {
          left: 100,
          right: '8%',
          bottom: 150
        }
      ],
      xAxis: {
        type: 'value',
        min: 0,
        max: 22.5,
        interval: 2,
        axisTick: {
          inside: true
        },
        minorTick: {
          show: true
        }
      },
      yAxis: {
        type: 'value',
        min: 0,
        max: 35,
        interval: 5,
        axisTick: {
          inside: true
        },
        minorTick: {
          show: true
        }
      },
      color: ['#EB5B5B', '#C655E9', '#2D53D3'],
      tooltip: {
        trigger: 'axis'
      },
      series: [     	
		{
		  type: 'line',
		  showSymbol: false,
		  data: rawData.fElementPositionArray.map((item, index) => [
		    item,
		    rawData.fShellUp_3DArray[index]
		  ]),
		  endLabel: {
		    show: true,
		    formatter: function (params) {
		      return 'Center loose';
		    },
		    color: '#2D53D3',
		    fontSize: 10
		  }
		}
      ]
    };

    myChart.setOption(option);
  },
  methods: {
    sendMessage() {
      if (this.message.trim() !== '') {
        this.socket.send(this.message);
        this.message = '';
      }
    }
  }
};
</script>

<style>
.echart-page {
  position: relative;
}
.y-desc {
  transform: rotate(-90deg);
  transform-origin: left;
  position: absolute;
  left: 30px;
  top: 50%;
  font-size: 17px;
  font-weight: bold;
}
.echart-footer {
  margin-top: -80px;
  padding: 0 80px;
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  font-weight: 500;
  text-align: left;
}
.echart-footer span {
  display: inline-block;
  width: 70px;
}
</style>
